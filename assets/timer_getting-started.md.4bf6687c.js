import{d as Q,a0 as Z,g as K,j as N,B as W,_ as X,o as U,c as I,k as c,t as M,p as ss,m as ns,J as es,a as L,S as as}from"./chunks/framework.27f3689a.js";const os=(e,n=540)=>{const s=new Date(e),a=(s.getTimezoneOffset()+n)*60*1e3;return new Date(s.getTime()+a)};var T=function(e,n){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},T(e,n)};function v(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");T(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}function _(e){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&e[n],a=0;if(s)return s.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,n){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var a=s.call(e),o,t=[],l;try{for(;(n===void 0||n-- >0)&&!(o=a.next()).done;)t.push(o.value)}catch(p){l={error:p}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return t}function b(e,n,s){if(s||arguments.length===2)for(var a=0,o=n.length,t;a<o;a++)(t||!(a in n))&&(t||(t=Array.prototype.slice.call(n,0,a)),t[a]=n[a]);return e.concat(t||Array.prototype.slice.call(n))}function F(e){return typeof e=="function"}function q(e){var n=function(a){Error.call(a),a.stack=new Error().stack},s=e(n);return s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s}var g=q(function(e){return function(s){e(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(a,o){return o+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s}});function E(e,n){if(e){var s=e.indexOf(n);0<=s&&e.splice(s,1)}}var f=function(){function e(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var n,s,a,o,t;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var p=_(l),r=p.next();!r.done;r=p.next()){var u=r.value;u.remove(this)}}catch(i){n={error:i}}finally{try{r&&!r.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}else l.remove(this);var y=this.initialTeardown;if(F(y))try{y()}catch(i){t=i instanceof g?i.errors:[i]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var A=_(d),D=A.next();!D.done;D=A.next()){var J=D.value;try{O(J)}catch(i){t=t??[],i instanceof g?t=b(b([],m(t)),m(i.errors)):t.push(i)}}}catch(i){a={error:i}}finally{try{D&&!D.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}}if(t)throw new g(t)}},e.prototype.add=function(n){var s;if(n&&n!==this)if(this.closed)O(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(s=this._finalizers)!==null&&s!==void 0?s:[]).push(n)}},e.prototype._hasParent=function(n){var s=this._parentage;return s===n||Array.isArray(s)&&s.includes(n)},e.prototype._addParent=function(n){var s=this._parentage;this._parentage=Array.isArray(s)?(s.push(n),s):s?[s,n]:n},e.prototype._removeParent=function(n){var s=this._parentage;s===n?this._parentage=null:Array.isArray(s)&&E(s,n)},e.prototype.remove=function(n){var s=this._finalizers;s&&E(s,n),n instanceof e&&n._removeParent(this)},e.EMPTY=function(){var n=new e;return n.closed=!0,n}(),e}(),$=f.EMPTY;function V(e){return e instanceof f||e&&"closed"in e&&F(e.remove)&&F(e.add)&&F(e.unsubscribe)}function O(e){F(e)?e():e.unsubscribe()}var z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},w={setTimeout:function(e,n){for(var s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];var o=w.delegate;return o!=null&&o.setTimeout?o.setTimeout.apply(o,b([e,n],m(s))):setTimeout.apply(void 0,b([e,n],m(s)))},clearTimeout:function(e){var n=w.delegate;return((n==null?void 0:n.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ts(e){w.setTimeout(function(){throw e})}function P(){}function C(e){e()}var B=function(e){v(n,e);function n(s){var a=e.call(this)||this;return a.isStopped=!1,s?(a.destination=s,V(s)&&s.add(a)):a.destination=cs,a}return n.create=function(s,a,o){return new x(s,a,o)},n.prototype.next=function(s){this.isStopped||this._next(s)},n.prototype.error=function(s){this.isStopped||(this.isStopped=!0,this._error(s))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(s){this.destination.next(s)},n.prototype._error=function(s){try{this.destination.error(s)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(f),ls=Function.prototype.bind;function S(e,n){return ls.call(e,n)}var ps=function(){function e(n){this.partialObserver=n}return e.prototype.next=function(n){var s=this.partialObserver;if(s.next)try{s.next(n)}catch(a){h(a)}},e.prototype.error=function(n){var s=this.partialObserver;if(s.error)try{s.error(n)}catch(a){h(a)}else h(n)},e.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(s){h(s)}},e}(),x=function(e){v(n,e);function n(s,a,o){var t=e.call(this)||this,l;if(F(s)||!s)l={next:s??void 0,error:a??void 0,complete:o??void 0};else{var p;t&&z.useDeprecatedNextContext?(p=Object.create(s),p.unsubscribe=function(){return t.unsubscribe()},l={next:s.next&&S(s.next,p),error:s.error&&S(s.error,p),complete:s.complete&&S(s.complete,p)}):l=s}return t.destination=new ps(l),t}return n}(B);function h(e){ts(e)}function rs(e){throw e}var cs={closed:!0,next:P,error:rs,complete:P},is=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ys(e){return e}function Fs(e){return e.length===0?ys:e.length===1?e[0]:function(s){return e.reduce(function(a,o){return o(a)},s)}}var j=function(){function e(n){n&&(this._subscribe=n)}return e.prototype.lift=function(n){var s=new e;return s.source=this,s.operator=n,s},e.prototype.subscribe=function(n,s,a){var o=this,t=us(n)?n:new x(n,s,a);return C(function(){var l=o,p=l.operator,r=l.source;t.add(p?p.call(t,r):r?o._subscribe(t):o._trySubscribe(t))}),t},e.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(s){n.error(s)}},e.prototype.forEach=function(n,s){var a=this;return s=k(s),new s(function(o,t){var l=new x({next:function(p){try{n(p)}catch(r){t(r),l.unsubscribe()}},error:t,complete:o});a.subscribe(l)})},e.prototype._subscribe=function(n){var s;return(s=this.source)===null||s===void 0?void 0:s.subscribe(n)},e.prototype[is]=function(){return this},e.prototype.pipe=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return Fs(n)(this)},e.prototype.toPromise=function(n){var s=this;return n=k(n),new n(function(a,o){var t;s.subscribe(function(l){return t=l},function(l){return o(l)},function(){return a(t)})})},e.create=function(n){return new e(n)},e}();function k(e){var n;return(n=e??z.Promise)!==null&&n!==void 0?n:Promise}function Ds(e){return e&&F(e.next)&&F(e.error)&&F(e.complete)}function us(e){return e&&e instanceof B||Ds(e)&&V(e)}var ds=q(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),R=function(e){v(n,e);function n(){var s=e.call(this)||this;return s.closed=!1,s.currentObservers=null,s.observers=[],s.isStopped=!1,s.hasError=!1,s.thrownError=null,s}return n.prototype.lift=function(s){var a=new G(this,this);return a.operator=s,a},n.prototype._throwIfClosed=function(){if(this.closed)throw new ds},n.prototype.next=function(s){var a=this;C(function(){var o,t;if(a._throwIfClosed(),!a.isStopped){a.currentObservers||(a.currentObservers=Array.from(a.observers));try{for(var l=_(a.currentObservers),p=l.next();!p.done;p=l.next()){var r=p.value;r.next(s)}}catch(u){o={error:u}}finally{try{p&&!p.done&&(t=l.return)&&t.call(l)}finally{if(o)throw o.error}}}})},n.prototype.error=function(s){var a=this;C(function(){if(a._throwIfClosed(),!a.isStopped){a.hasError=a.isStopped=!0,a.thrownError=s;for(var o=a.observers;o.length;)o.shift().error(s)}})},n.prototype.complete=function(){var s=this;C(function(){if(s._throwIfClosed(),!s.isStopped){s.isStopped=!0;for(var a=s.observers;a.length;)a.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var s;return((s=this.observers)===null||s===void 0?void 0:s.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(s){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,s)},n.prototype._subscribe=function(s){return this._throwIfClosed(),this._checkFinalizedStatuses(s),this._innerSubscribe(s)},n.prototype._innerSubscribe=function(s){var a=this,o=this,t=o.hasError,l=o.isStopped,p=o.observers;return t||l?$:(this.currentObservers=null,p.push(s),new f(function(){a.currentObservers=null,E(p,s)}))},n.prototype._checkFinalizedStatuses=function(s){var a=this,o=a.hasError,t=a.thrownError,l=a.isStopped;o?s.error(t):l&&s.complete()},n.prototype.asObservable=function(){var s=new j;return s.source=this,s},n.create=function(s,a){return new G(s,a)},n}(j),G=function(e){v(n,e);function n(s,a){var o=e.call(this)||this;return o.destination=s,o.source=a,o}return n.prototype.next=function(s){var a,o;(o=(a=this.destination)===null||a===void 0?void 0:a.next)===null||o===void 0||o.call(a,s)},n.prototype.error=function(s){var a,o;(o=(a=this.destination)===null||a===void 0?void 0:a.error)===null||o===void 0||o.call(a,s)},n.prototype.complete=function(){var s,a;(a=(s=this.destination)===null||s===void 0?void 0:s.complete)===null||a===void 0||a.call(s)},n.prototype._subscribe=function(s){var a,o;return(o=(a=this.source)===null||a===void 0?void 0:a.subscribe(s))!==null&&o!==void 0?o:$},n}(R);class Y{constructor(n={}){this.fallbackLoose=!0,this.fallbackLooseTimeout=1e3,this.timer=null,this.timerLoose=null,this.timezoneOffset=540,this.startAt=0,this.executeAt=0,this.executedAt=0,this.executeGap=0,this.executeSafeGap=10,this.isDestroy=!1;const{fallbackLoose:s=!0,fallbackLooseTimeout:a,timezoneOffset:o}=n;this.fallbackLoose=s,a&&(this.fallbackLooseTimeout=a),o&&(this.timezoneOffset=o),this.subject=new R,this.observable=this.subject.asObservable()}nowDate(){return os(Date.now(),this.timezoneOffset)}nowAt(){return this.nowDate().getTime()}getStartAt(){return this.startAt}getExecuteGap(){return this.executeGap}setExecuteSafeGap(n){this.executeSafeGap=n}executeTimout(){clearTimeout(this.timer);const n=this.nowDate(),s=this.getNextGap(n)+this.executeSafeGap;this.executeAt=n.getTime(),this.executeGap=this.executeAt-this.startAt,this.timer=setTimeout(()=>{this.dispatch(),this.executeTimout()},s),this.fallbackLoose&&(this.timerLoose=setTimeout(()=>{this.dispatch()},s+this.fallbackLooseTimeout))}getNextGap(n){return 1e3-n.getMilliseconds()}isTargetChanged(){return!1}dispatch(){this.isDestroy||this.isTargetChanged()&&(this.executedAt=this.nowDate().getTime(),this.executeGap=this.executedAt-this.startAt,this.subject.next())}observe(){return this.observable}start(){this.startAt=this.nowAt(),this.executeTimout()}stop(){clearTimeout(this.timer),clearTimeout(this.timerLoose)}destroy(){this.stop(),this.isDestroy=!0,this.subject.unsubscribe()}}class As extends Y{constructor(){super(...arguments),this.fallbackLooseTimeout=1e3}getNextGap(n){return 6e4-(n.getSeconds()*1e3+n.getMilliseconds())}isTargetChanged(){return new Date(this.executeAt).getMinutes()!==new Date(this.nowAt()).getMinutes()}}class fs extends Y{constructor(){super(...arguments),this.fallbackLooseTimeout=200}getNextGap(n){return 1e3-n.getMilliseconds()}isTargetChanged(){return new Date(this.executeAt).getSeconds()!==new Date(this.nowAt()).getSeconds()}}const hs=Q({setup(){const e=Date.now(),n=new fs,s=new As,a=new f,o=Z({secondDate:null,minuteDate:null}),t=K(()=>{const{secondDate:y,minuteDate:d}=o,A=(y==null?void 0:y.toLocaleString())||"",D=(d==null?void 0:d.toLocaleString())||"";return{labelSecondTimer:A,labelMinuteTimer:D}}),l=()=>{r()},p=()=>{u()},r=()=>{const y=e+n.getExecuteGap();o.secondDate=new Date(y)},u=()=>{const y=e+s.getExecuteGap();o.minuteDate=new Date(y)};return N(()=>{a.add(n.observe().subscribe(l)),n.start(),a.add(s.observe().subscribe(p)),s.start(),r(),u()}),W(()=>{n.stop(),s.stop(),a.unsubscribe()}),{state:o,viewState:t}}});const H=e=>(ss("data-v-df1d6d99"),e=e(),ns(),e),Cs={class:"times"},ms={class:"time"},bs=H(()=>c("dt",null,"SecondTimer",-1)),vs={class:"time"},gs=H(()=>c("dt",null,"MinuteTimer",-1));function Ss(e,n,s,a,o,t){return U(),I("div",null,[c("div",Cs,[c("dl",ms,[bs,c("dd",null,M(e.viewState.labelSecondTimer),1)]),c("dl",vs,[gs,c("dd",null,M(e.viewState.labelMinuteTimer),1)])])])}const Ts=X(hs,[["render",Ss],["__scopeId","data-v-df1d6d99"]]),_s=c("h1",{id:"timer",tabindex:"-1"},[L("Timer "),c("a",{class:"header-anchor",href:"#timer","aria-label":'Permalink to "Timer"'},"​")],-1),Es=c("p",null,"javascript 의 setTimeout, setInterval 은 정확한 실행 시간을 보장하지 않습니다. 이미 많이 알려져 있는 부분으로 1초 후 실행으로 명령한다고 해 서 정확히 1초 후에 실행되는게 아닙니다. Timer 역시 마찬가지로 정확한 실행 시점을 보장하긴 어려우나, (어느정도)정확한 시간을 알아내야 하는 상 황을 돕기 위해 만들어졌습니다.",-1),ws=c("h2",{id:"데모",tabindex:"-1"},[L("데모 "),c("a",{class:"header-anchor",href:"#데모","aria-label":'Permalink to "데모"'},"​")],-1),xs=c("p",null,"SecondTimer 와 MinuteTimer 의 간단한 사용예 입니다.",-1),Ms=as(`<p>💡 <strong>아래 코드를 살펴보기 전 참고하세요.</strong></p><ul><li>SecondTimer 와 MinuteTimer 의 차이는 실행 간격의 차이가 있습니다. SecondTimer 는 1초, MinuteTimer 는 1분의 간격으로 실행 됩니다.</li><li>Timer 는 시간을 출력하기 위함이 아니라 정해진 간격 마다 알림을 주기 위한 용도로 만들어 졌습니다.</li><li>브라우저의 비활성화(sleep) 상태와 같이 타이머의 업데이트가 화면에 표시가 된다는것을 보장하기 어려운 경우가 있습니다. SecondTimer 의 경우 실행 간격이 짧기 때문에 금새 화면이 업데이트 되어 문제를 알아차리기 어렵지만, MinuteTimer 의 경우 실행 간격이 길기 때문에 비활성 상태에 빠져있던 경우 화면에 업데이트 되기까지 MinuteTimer 의 실행 간격인 최대 1분이 걸릴 수 있습니다. 이 점을 보완하기 위해 Visibility API 와 같이 화면이 활성화 되는 시점을 할 수 있다면 직접 업데이트를 해주는것도 좋습니다.</li></ul><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">times</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dl</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">time</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dt</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">SecondTimer</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dt</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dd</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ viewState.labelSecondTimer }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dd</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dl</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dl</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">time</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dt</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">MinuteTimer</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dt</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dd</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ viewState.labelMinuteTimer }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dd</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dl</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">computed</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineComponent</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">onMounted</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">onUnmounted</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reactive</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SecondTimer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">MinuteTimer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@jood/helpdesk-timer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Subscription</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rxjs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineComponent</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">setup</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">serverTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">now</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secondTimer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">SecondTimer</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">minuteTimer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">MinuteTimer</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">listener</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Subscription</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      secondDate</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null,</span></span>
<span class="line"><span style="color:#F07178;">      minuteDate</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">viewState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">computed</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secondDate</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">minuteDate</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">labelSecondTimer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secondDate</span><span style="color:#89DDFF;">?.</span><span style="color:#82AAFF;">toLocaleString</span><span style="color:#F07178;">() </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">labelMinuteTimer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">minuteDate</span><span style="color:#89DDFF;">?.</span><span style="color:#82AAFF;">toLocaleString</span><span style="color:#F07178;">() </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">labelSecondTimer</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">labelMinuteTimer</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">onSecondUpdated</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">updateSecondTimer</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">onMinuteUpdated</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">updateMinuteTimer</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">updateSecondTimer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timeAt</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">serverTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secondTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getExecuteGap</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">secondDate</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timeAt</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">updateMinuteTimer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timeAt</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">serverTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">minuteTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getExecuteGap</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">minuteDate</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timeAt</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">onMounted</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">listener</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">secondTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">subscribe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">onSecondUpdated</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">secondTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">start</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">listener</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">minuteTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">subscribe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">onMinuteUpdated</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">minuteTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">start</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">updateSecondTimer</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">updateMinuteTimer</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">onUnmounted</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">secondTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stop</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">minuteTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stop</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">listener</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">unsubscribe</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">viewState</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>시간 출력을 업데이트 하는 부분을 살펴보세요. <code>getExecuteGap</code> 은 Timer 가 start 된 후 지나간 시간 입니다.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> updateSecondTimer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timeAt</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">serverTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secondTimer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getExecuteGap</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">secondDate</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timeAt</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p>클라이언트 시간만으로는 PC/디바이스 시간 설정에 영향을 받는 문제로 (데모에서는 Date.now() 를 사용했지만) serverTime 을 내려받은 시간을 기준으로 카운트 다운을 한다거나 지나간 시간을 표시하는 사례는 종종 있습니다. 이런 경우 <code>getExecuteGap</code> 를 사용하면 됩니다. timezone 과 같은 문제를 다루는건 사용자의 몫 입니다.</p><blockquote><p>Timer 는 시간을 출력하기 위함이 아니라 정해진 간격 마다 알림을 주기 위한 용도로 만들어 졌습니다.</p></blockquote>`,7),js=JSON.parse('{"title":"Timer","description":"","frontmatter":{},"headers":[],"relativePath":"timer/getting-started.md","filePath":"timer/getting-started.md"}'),Os={name:"timer/getting-started.md"},ks=Object.assign(Os,{setup(e){return(n,s)=>(U(),I("div",null,[_s,Es,ws,xs,es(Ts),Ms]))}});export{js as __pageData,ks as default};
