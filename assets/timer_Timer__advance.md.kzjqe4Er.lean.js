import{d as Q,am as Z,k as K,l as N,A as W,_ as X,o as j,c as G,m as d,t as w,q as ss,s as is,I as ts,U as I}from"./chunks/framework.WU9gZgzV.js";const ns=(t,i=540)=>{const s=new Date(t),n=(s.getTimezoneOffset()+i)*60*1e3;return new Date(s.getTime()+n)};var A=function(t,i){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])},A(t,i)};function F(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");A(t,i);function s(){this.constructor=t}t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function D(t){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&t[i],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(t,i){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),a,e=[],r;try{for(;(i===void 0||i-- >0)&&!(a=n.next()).done;)e.push(a.value)}catch(l){r={error:l}}finally{try{a&&!a.done&&(s=n.return)&&s.call(n)}finally{if(r)throw r.error}}return e}function S(t,i,s){if(s||arguments.length===2)for(var n=0,a=i.length,e;n<a;n++)(e||!(n in i))&&(e||(e=Array.prototype.slice.call(i,0,n)),e[n]=i[n]);return t.concat(e||Array.prototype.slice.call(i))}function o(t){return typeof t=="function"}function U(t){var i=function(n){Error.call(n),n.stack=new Error().stack},s=t(i);return s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s}var b=U(function(t){return function(s){t(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(n,a){return a+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s}});function _(t,i){if(t){var s=t.indexOf(i);0<=s&&t.splice(s,1)}}var g=function(){function t(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var i,s,n,a,e;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var l=D(r),h=l.next();!h.done;h=l.next()){var c=h.value;c.remove(this)}}catch(p){i={error:p}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}else r.remove(this);var k=this.initialTeardown;if(o(k))try{k()}catch(p){e=p instanceof b?p.errors:[p]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var y=D(u),E=y.next();!E.done;E=y.next()){var J=E.value;try{B(J)}catch(p){e=e??[],p instanceof b?e=S(S([],T(e)),T(p.errors)):e.push(p)}}}catch(p){n={error:p}}finally{try{E&&!E.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}}if(e)throw new b(e)}},t.prototype.add=function(i){var s;if(i&&i!==this)if(this.closed)B(i);else{if(i instanceof t){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=(s=this._finalizers)!==null&&s!==void 0?s:[]).push(i)}},t.prototype._hasParent=function(i){var s=this._parentage;return s===i||Array.isArray(s)&&s.includes(i)},t.prototype._addParent=function(i){var s=this._parentage;this._parentage=Array.isArray(s)?(s.push(i),s):s?[s,i]:i},t.prototype._removeParent=function(i){var s=this._parentage;s===i?this._parentage=null:Array.isArray(s)&&_(s,i)},t.prototype.remove=function(i){var s=this._finalizers;s&&_(s,i),i instanceof t&&i._removeParent(this)},t.EMPTY=function(){var i=new t;return i.closed=!0,i}(),t}(),L=g.EMPTY;function q(t){return t instanceof g||t&&"closed"in t&&o(t.remove)&&o(t.add)&&o(t.unsubscribe)}function B(t){o(t)?t():t.unsubscribe()}var V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},z={setTimeout:function(t,i){for(var s=[],n=2;n<arguments.length;n++)s[n-2]=arguments[n];return setTimeout.apply(void 0,S([t,i],T(s)))},clearTimeout:function(t){var i=z.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0};function as(t){z.setTimeout(function(){throw t})}function x(){}function m(t){t()}var $=function(t){F(i,t);function i(s){var n=t.call(this)||this;return n.isStopped=!1,s?(n.destination=s,q(s)&&s.add(n)):n.destination=hs,n}return i.create=function(s,n,a){return new C(s,n,a)},i.prototype.next=function(s){this.isStopped||this._next(s)},i.prototype.error=function(s){this.isStopped||(this.isStopped=!0,this._error(s))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(s){this.destination.next(s)},i.prototype._error=function(s){try{this.destination.error(s)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(g),es=Function.prototype.bind;function v(t,i){return es.call(t,i)}var rs=function(){function t(i){this.partialObserver=i}return t.prototype.next=function(i){var s=this.partialObserver;if(s.next)try{s.next(i)}catch(n){f(n)}},t.prototype.error=function(i){var s=this.partialObserver;if(s.error)try{s.error(i)}catch(n){f(n)}else f(i)},t.prototype.complete=function(){var i=this.partialObserver;if(i.complete)try{i.complete()}catch(s){f(s)}},t}(),C=function(t){F(i,t);function i(s,n,a){var e=t.call(this)||this,r;if(o(s)||!s)r={next:s??void 0,error:n??void 0,complete:a??void 0};else{var l;e&&V.useDeprecatedNextContext?(l=Object.create(s),l.unsubscribe=function(){return e.unsubscribe()},r={next:s.next&&v(s.next,l),error:s.error&&v(s.error,l),complete:s.complete&&v(s.complete,l)}):r=s}return e.destination=new rs(r),e}return i}($);function f(t){as(t)}function ls(t){throw t}var hs={closed:!0,next:x,error:ls,complete:x},ps=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ks(t){return t}function os(t){return t.length===0?ks:t.length===1?t[0]:function(s){return t.reduce(function(n,a){return a(n)},s)}}var M=function(){function t(i){i&&(this._subscribe=i)}return t.prototype.lift=function(i){var s=new t;return s.source=this,s.operator=i,s},t.prototype.subscribe=function(i,s,n){var a=this,e=ds(i)?i:new C(i,s,n);return m(function(){var r=a,l=r.operator,h=r.source;e.add(l?l.call(e,h):h?a._subscribe(e):a._trySubscribe(e))}),e},t.prototype._trySubscribe=function(i){try{return this._subscribe(i)}catch(s){i.error(s)}},t.prototype.forEach=function(i,s){var n=this;return s=O(s),new s(function(a,e){var r=new C({next:function(l){try{i(l)}catch(h){e(h),r.unsubscribe()}},error:e,complete:a});n.subscribe(r)})},t.prototype._subscribe=function(i){var s;return(s=this.source)===null||s===void 0?void 0:s.subscribe(i)},t.prototype[ps]=function(){return this},t.prototype.pipe=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return os(i)(this)},t.prototype.toPromise=function(i){var s=this;return i=O(i),new i(function(n,a){var e;s.subscribe(function(r){return e=r},function(r){return a(r)},function(){return n(e)})})},t.create=function(i){return new t(i)},t}();function O(t){var i;return(i=t??V.Promise)!==null&&i!==void 0?i:Promise}function Es(t){return t&&o(t.next)&&o(t.error)&&o(t.complete)}function ds(t){return t&&t instanceof $||Es(t)&&q(t)}var cs=U(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),R=function(t){F(i,t);function i(){var s=t.call(this)||this;return s.closed=!1,s.currentObservers=null,s.observers=[],s.isStopped=!1,s.hasError=!1,s.thrownError=null,s}return i.prototype.lift=function(s){var n=new P(this,this);return n.operator=s,n},i.prototype._throwIfClosed=function(){if(this.closed)throw new cs},i.prototype.next=function(s){var n=this;m(function(){var a,e;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var r=D(n.currentObservers),l=r.next();!l.done;l=r.next()){var h=l.value;h.next(s)}}catch(c){a={error:c}}finally{try{l&&!l.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}}})},i.prototype.error=function(s){var n=this;m(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=s;for(var a=n.observers;a.length;)a.shift().error(s)}})},i.prototype.complete=function(){var s=this;m(function(){if(s._throwIfClosed(),!s.isStopped){s.isStopped=!0;for(var n=s.observers;n.length;)n.shift().complete()}})},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var s;return((s=this.observers)===null||s===void 0?void 0:s.length)>0},enumerable:!1,configurable:!0}),i.prototype._trySubscribe=function(s){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,s)},i.prototype._subscribe=function(s){return this._throwIfClosed(),this._checkFinalizedStatuses(s),this._innerSubscribe(s)},i.prototype._innerSubscribe=function(s){var n=this,a=this,e=a.hasError,r=a.isStopped,l=a.observers;return e||r?L:(this.currentObservers=null,l.push(s),new g(function(){n.currentObservers=null,_(l,s)}))},i.prototype._checkFinalizedStatuses=function(s){var n=this,a=n.hasError,e=n.thrownError,r=n.isStopped;a?s.error(e):r&&s.complete()},i.prototype.asObservable=function(){var s=new M;return s.source=this,s},i.create=function(s,n){return new P(s,n)},i}(M),P=function(t){F(i,t);function i(s,n){var a=t.call(this)||this;return a.destination=s,a.source=n,a}return i.prototype.next=function(s){var n,a;(a=(n=this.destination)===null||n===void 0?void 0:n.next)===null||a===void 0||a.call(n,s)},i.prototype.error=function(s){var n,a;(a=(n=this.destination)===null||n===void 0?void 0:n.error)===null||a===void 0||a.call(n,s)},i.prototype.complete=function(){var s,n;(n=(s=this.destination)===null||s===void 0?void 0:s.complete)===null||n===void 0||n.call(s)},i.prototype._subscribe=function(s){var n,a;return(a=(n=this.source)===null||n===void 0?void 0:n.subscribe(s))!==null&&a!==void 0?a:L},i}(R);class Y{constructor(i={}){this.fallbackLoose=!0,this.fallbackLooseTimeout=1e3,this.timer=null,this.timerLoose=null,this.timezoneOffset=540,this.startAt=0,this.executeAt=0,this.executedAt=0,this.executeGap=0,this.executeSafeGap=10,this.isDestroy=!1;const{fallbackLoose:s=!0,fallbackLooseTimeout:n,timezoneOffset:a}=i;this.fallbackLoose=s,n&&(this.fallbackLooseTimeout=n),a&&(this.timezoneOffset=a),this.subject=new R,this.observable=this.subject.asObservable()}nowDate(){return ns(Date.now(),this.timezoneOffset)}nowAt(){return this.nowDate().getTime()}getStartAt(){return this.startAt}getExecuteGap(){return this.executeGap}setExecuteSafeGap(i){this.executeSafeGap=i}executeTimout(){clearTimeout(this.timer);const i=this.nowDate(),s=this.getNextGap(i)+this.executeSafeGap;this.executeAt=i.getTime(),this.executeGap=this.executeAt-this.startAt,this.timer=setTimeout(()=>{this.dispatch(),this.executeTimout()},s),this.fallbackLoose&&(this.timerLoose=setTimeout(()=>{this.dispatch()},s+this.fallbackLooseTimeout))}getNextGap(i){return 1e3-i.getMilliseconds()}isTargetChanged(){return!1}dispatch(){this.isDestroy||this.isTargetChanged()&&(this.executedAt=this.nowDate().getTime(),this.executeGap=this.executedAt-this.startAt,this.subject.next())}observe(){return this.observable}start(){this.startAt=this.nowAt(),this.executeTimout()}stop(){clearTimeout(this.timer),clearTimeout(this.timerLoose)}destroy(){this.stop(),this.isDestroy=!0,this.subject.unsubscribe()}}class us extends Y{constructor(){super(...arguments),this.fallbackLooseTimeout=1e3}getNextGap(i){return 6e4-(i.getSeconds()*1e3+i.getMilliseconds())}isTargetChanged(){return new Date(this.executeAt).getMinutes()!==new Date(this.nowAt()).getMinutes()}}class ys extends Y{constructor(){super(...arguments),this.fallbackLooseTimeout=200}getNextGap(i){return 1e3-i.getMilliseconds()}isTargetChanged(){return new Date(this.executeAt).getSeconds()!==new Date(this.nowAt()).getSeconds()}}const gs=Q({setup(){const t=Date.now(),i=new ys,s=new us,n=new g,a=Z({secondDate:null,minuteDate:null}),e=K(()=>{const{secondDate:k,minuteDate:u}=a,y=(k==null?void 0:k.toLocaleString())||"",E=(u==null?void 0:u.toLocaleString())||"";return{labelSecondTimer:y,labelMinuteTimer:E}}),r=()=>{h()},l=()=>{c()},h=()=>{const k=t+i.getExecuteGap();a.secondDate=new Date(k)},c=()=>{const k=t+s.getExecuteGap();a.minuteDate=new Date(k)};return N(()=>{n.add(i.observe().subscribe(r)),i.start(),n.add(s.observe().subscribe(l)),s.start(),h(),c()}),W(()=>{i.stop(),s.stop(),n.unsubscribe()}),{state:a,viewState:e}}}),H=t=>(ss("data-v-8b97f146"),t=t(),is(),t),fs={class:"times"},ms={class:"time"},Fs=H(()=>d("dt",null,"SecondTimer",-1)),bs={class:"time"},vs=H(()=>d("dt",null,"MinuteTimer",-1));function As(t,i,s,n,a,e){return j(),G("div",null,[d("div",fs,[d("dl",ms,[Fs,d("dd",null,w(t.viewState.labelSecondTimer),1)]),d("dl",bs,[vs,d("dd",null,w(t.viewState.labelMinuteTimer),1)])])])}const Ds=X(gs,[["render",As],["__scopeId","data-v-8b97f146"]]),Ts=I("",4),Ss=I("",6),ws=JSON.parse('{"title":"Timer","description":"","frontmatter":{},"headers":[],"relativePath":"timer/Timer__advance.md","filePath":"timer/Timer__advance.md"}'),_s={name:"timer/Timer__advance.md"},Bs=Object.assign(_s,{setup(t){return(i,s)=>(j(),G("div",null,[Ts,ts(Ds),Ss]))}});export{ws as __pageData,Bs as default};
