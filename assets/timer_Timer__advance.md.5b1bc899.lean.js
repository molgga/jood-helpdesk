import{d as Q,a0 as Z,g as K,j as N,B as W,_ as X,o as I,c as U,k as D,t as M,p as ss,m as ns,J as as,S as L}from"./chunks/framework.27f3689a.js";const es=(a,n=540)=>{const s=new Date(a),e=(s.getTimezoneOffset()+n)*60*1e3;return new Date(s.getTime()+e)};var _=function(a,n){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s[o]=e[o])},_(a,n)};function v(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");_(a,n);function s(){this.constructor=a}a.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}function S(a){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&a[n],e=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&e>=a.length&&(a=void 0),{value:a&&a[e++],done:!a}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(a,n){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var e=s.call(a),o,t=[],l;try{for(;(n===void 0||n-- >0)&&!(o=e.next()).done;)t.push(o.value)}catch(p){l={error:p}}finally{try{o&&!o.done&&(s=e.return)&&s.call(e)}finally{if(l)throw l.error}}return t}function b(a,n,s){if(s||arguments.length===2)for(var e=0,o=n.length,t;e<o;e++)(t||!(e in n))&&(t||(t=Array.prototype.slice.call(n,0,e)),t[e]=n[e]);return a.concat(t||Array.prototype.slice.call(n))}function y(a){return typeof a=="function"}function q(a){var n=function(e){Error.call(e),e.stack=new Error().stack},s=a(n);return s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s}var T=q(function(a){return function(s){a(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(e,o){return o+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s}});function E(a,n){if(a){var s=a.indexOf(n);0<=s&&a.splice(s,1)}}var f=function(){function a(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return a.prototype.unsubscribe=function(){var n,s,e,o,t;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var p=S(l),r=p.next();!r.done;r=p.next()){var u=r.value;u.remove(this)}}catch(c){n={error:c}}finally{try{r&&!r.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}else l.remove(this);var i=this.initialTeardown;if(y(i))try{i()}catch(c){t=c instanceof T?c.errors:[c]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var A=S(d),F=A.next();!F.done;F=A.next()){var J=F.value;try{O(J)}catch(c){t=t??[],c instanceof T?t=b(b([],m(t)),m(c.errors)):t.push(c)}}}catch(c){e={error:c}}finally{try{F&&!F.done&&(o=A.return)&&o.call(A)}finally{if(e)throw e.error}}}if(t)throw new T(t)}},a.prototype.add=function(n){var s;if(n&&n!==this)if(this.closed)O(n);else{if(n instanceof a){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(s=this._finalizers)!==null&&s!==void 0?s:[]).push(n)}},a.prototype._hasParent=function(n){var s=this._parentage;return s===n||Array.isArray(s)&&s.includes(n)},a.prototype._addParent=function(n){var s=this._parentage;this._parentage=Array.isArray(s)?(s.push(n),s):s?[s,n]:n},a.prototype._removeParent=function(n){var s=this._parentage;s===n?this._parentage=null:Array.isArray(s)&&E(s,n)},a.prototype.remove=function(n){var s=this._finalizers;s&&E(s,n),n instanceof a&&n._removeParent(this)},a.EMPTY=function(){var n=new a;return n.closed=!0,n}(),a}(),V=f.EMPTY;function z(a){return a instanceof f||a&&"closed"in a&&y(a.remove)&&y(a.add)&&y(a.unsubscribe)}function O(a){y(a)?a():a.unsubscribe()}var $={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},w={setTimeout:function(a,n){for(var s=[],e=2;e<arguments.length;e++)s[e-2]=arguments[e];var o=w.delegate;return o!=null&&o.setTimeout?o.setTimeout.apply(o,b([a,n],m(s))):setTimeout.apply(void 0,b([a,n],m(s)))},clearTimeout:function(a){var n=w.delegate;return((n==null?void 0:n.clearTimeout)||clearTimeout)(a)},delegate:void 0};function os(a){w.setTimeout(function(){throw a})}function P(){}function C(a){a()}var B=function(a){v(n,a);function n(s){var e=a.call(this)||this;return e.isStopped=!1,s?(e.destination=s,z(s)&&s.add(e)):e.destination=rs,e}return n.create=function(s,e,o){return new x(s,e,o)},n.prototype.next=function(s){this.isStopped||this._next(s)},n.prototype.error=function(s){this.isStopped||(this.isStopped=!0,this._error(s))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(s){this.destination.next(s)},n.prototype._error=function(s){try{this.destination.error(s)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(f),ts=Function.prototype.bind;function g(a,n){return ts.call(a,n)}var ls=function(){function a(n){this.partialObserver=n}return a.prototype.next=function(n){var s=this.partialObserver;if(s.next)try{s.next(n)}catch(e){h(e)}},a.prototype.error=function(n){var s=this.partialObserver;if(s.error)try{s.error(n)}catch(e){h(e)}else h(n)},a.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(s){h(s)}},a}(),x=function(a){v(n,a);function n(s,e,o){var t=a.call(this)||this,l;if(y(s)||!s)l={next:s??void 0,error:e??void 0,complete:o??void 0};else{var p;t&&$.useDeprecatedNextContext?(p=Object.create(s),p.unsubscribe=function(){return t.unsubscribe()},l={next:s.next&&g(s.next,p),error:s.error&&g(s.error,p),complete:s.complete&&g(s.complete,p)}):l=s}return t.destination=new ls(l),t}return n}(B);function h(a){os(a)}function ps(a){throw a}var rs={closed:!0,next:P,error:ps,complete:P},cs=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function is(a){return a}function ys(a){return a.length===0?is:a.length===1?a[0]:function(s){return a.reduce(function(e,o){return o(e)},s)}}var j=function(){function a(n){n&&(this._subscribe=n)}return a.prototype.lift=function(n){var s=new a;return s.source=this,s.operator=n,s},a.prototype.subscribe=function(n,s,e){var o=this,t=Ds(n)?n:new x(n,s,e);return C(function(){var l=o,p=l.operator,r=l.source;t.add(p?p.call(t,r):r?o._subscribe(t):o._trySubscribe(t))}),t},a.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(s){n.error(s)}},a.prototype.forEach=function(n,s){var e=this;return s=G(s),new s(function(o,t){var l=new x({next:function(p){try{n(p)}catch(r){t(r),l.unsubscribe()}},error:t,complete:o});e.subscribe(l)})},a.prototype._subscribe=function(n){var s;return(s=this.source)===null||s===void 0?void 0:s.subscribe(n)},a.prototype[cs]=function(){return this},a.prototype.pipe=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return ys(n)(this)},a.prototype.toPromise=function(n){var s=this;return n=G(n),new n(function(e,o){var t;s.subscribe(function(l){return t=l},function(l){return o(l)},function(){return e(t)})})},a.create=function(n){return new a(n)},a}();function G(a){var n;return(n=a??$.Promise)!==null&&n!==void 0?n:Promise}function Fs(a){return a&&y(a.next)&&y(a.error)&&y(a.complete)}function Ds(a){return a&&a instanceof B||Fs(a)&&z(a)}var us=q(function(a){return function(){a(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),R=function(a){v(n,a);function n(){var s=a.call(this)||this;return s.closed=!1,s.currentObservers=null,s.observers=[],s.isStopped=!1,s.hasError=!1,s.thrownError=null,s}return n.prototype.lift=function(s){var e=new k(this,this);return e.operator=s,e},n.prototype._throwIfClosed=function(){if(this.closed)throw new us},n.prototype.next=function(s){var e=this;C(function(){var o,t;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var l=S(e.currentObservers),p=l.next();!p.done;p=l.next()){var r=p.value;r.next(s)}}catch(u){o={error:u}}finally{try{p&&!p.done&&(t=l.return)&&t.call(l)}finally{if(o)throw o.error}}}})},n.prototype.error=function(s){var e=this;C(function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=s;for(var o=e.observers;o.length;)o.shift().error(s)}})},n.prototype.complete=function(){var s=this;C(function(){if(s._throwIfClosed(),!s.isStopped){s.isStopped=!0;for(var e=s.observers;e.length;)e.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var s;return((s=this.observers)===null||s===void 0?void 0:s.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(s){return this._throwIfClosed(),a.prototype._trySubscribe.call(this,s)},n.prototype._subscribe=function(s){return this._throwIfClosed(),this._checkFinalizedStatuses(s),this._innerSubscribe(s)},n.prototype._innerSubscribe=function(s){var e=this,o=this,t=o.hasError,l=o.isStopped,p=o.observers;return t||l?V:(this.currentObservers=null,p.push(s),new f(function(){e.currentObservers=null,E(p,s)}))},n.prototype._checkFinalizedStatuses=function(s){var e=this,o=e.hasError,t=e.thrownError,l=e.isStopped;o?s.error(t):l&&s.complete()},n.prototype.asObservable=function(){var s=new j;return s.source=this,s},n.create=function(s,e){return new k(s,e)},n}(j),k=function(a){v(n,a);function n(s,e){var o=a.call(this)||this;return o.destination=s,o.source=e,o}return n.prototype.next=function(s){var e,o;(o=(e=this.destination)===null||e===void 0?void 0:e.next)===null||o===void 0||o.call(e,s)},n.prototype.error=function(s){var e,o;(o=(e=this.destination)===null||e===void 0?void 0:e.error)===null||o===void 0||o.call(e,s)},n.prototype.complete=function(){var s,e;(e=(s=this.destination)===null||s===void 0?void 0:s.complete)===null||e===void 0||e.call(s)},n.prototype._subscribe=function(s){var e,o;return(o=(e=this.source)===null||e===void 0?void 0:e.subscribe(s))!==null&&o!==void 0?o:V},n}(R);class Y{constructor(n={}){this.fallbackLoose=!0,this.fallbackLooseTimeout=1e3,this.timer=null,this.timerLoose=null,this.timezoneOffset=540,this.startAt=0,this.executeAt=0,this.executedAt=0,this.executeGap=0,this.executeSafeGap=10,this.isDestroy=!1;const{fallbackLoose:s=!0,fallbackLooseTimeout:e,timezoneOffset:o}=n;this.fallbackLoose=s,e&&(this.fallbackLooseTimeout=e),o&&(this.timezoneOffset=o),this.subject=new R,this.observable=this.subject.asObservable()}nowDate(){return es(Date.now(),this.timezoneOffset)}nowAt(){return this.nowDate().getTime()}getStartAt(){return this.startAt}getExecuteGap(){return this.executeGap}setExecuteSafeGap(n){this.executeSafeGap=n}executeTimout(){clearTimeout(this.timer);const n=this.nowDate(),s=this.getNextGap(n)+this.executeSafeGap;this.executeAt=n.getTime(),this.executeGap=this.executeAt-this.startAt,this.timer=setTimeout(()=>{this.dispatch(),this.executeTimout()},s),this.fallbackLoose&&(this.timerLoose=setTimeout(()=>{this.dispatch()},s+this.fallbackLooseTimeout))}getNextGap(n){return 1e3-n.getMilliseconds()}isTargetChanged(){return!1}dispatch(){this.isDestroy||this.isTargetChanged()&&(this.executedAt=this.nowDate().getTime(),this.executeGap=this.executedAt-this.startAt,this.subject.next())}observe(){return this.observable}start(){this.startAt=this.nowAt(),this.executeTimout()}stop(){clearTimeout(this.timer),clearTimeout(this.timerLoose)}destroy(){this.stop(),this.isDestroy=!0,this.subject.unsubscribe()}}class ds extends Y{constructor(){super(...arguments),this.fallbackLooseTimeout=1e3}getNextGap(n){return 6e4-(n.getSeconds()*1e3+n.getMilliseconds())}isTargetChanged(){return new Date(this.executeAt).getMinutes()!==new Date(this.nowAt()).getMinutes()}}class As extends Y{constructor(){super(...arguments),this.fallbackLooseTimeout=200}getNextGap(n){return 1e3-n.getMilliseconds()}isTargetChanged(){return new Date(this.executeAt).getSeconds()!==new Date(this.nowAt()).getSeconds()}}const fs=Q({setup(){const a=Date.now(),n=new As,s=new ds,e=new f,o=Z({secondDate:null,minuteDate:null}),t=K(()=>{const{secondDate:i,minuteDate:d}=o,A=(i==null?void 0:i.toLocaleString())||"",F=(d==null?void 0:d.toLocaleString())||"";return{labelSecondTimer:A,labelMinuteTimer:F}}),l=()=>{r()},p=()=>{u()},r=()=>{const i=a+n.getExecuteGap();o.secondDate=new Date(i)},u=()=>{const i=a+s.getExecuteGap();o.minuteDate=new Date(i)};return N(()=>{e.add(n.observe().subscribe(l)),n.start(),e.add(s.observe().subscribe(p)),s.start(),r(),u()}),W(()=>{n.stop(),s.stop(),e.unsubscribe()}),{state:o,viewState:t}}});const H=a=>(ss("data-v-df1d6d99"),a=a(),ns(),a),hs={class:"times"},Cs={class:"time"},ms=H(()=>D("dt",null,"SecondTimer",-1)),bs={class:"time"},vs=H(()=>D("dt",null,"MinuteTimer",-1));function Ts(a,n,s,e,o,t){return I(),U("div",null,[D("div",hs,[D("dl",Cs,[ms,D("dd",null,M(a.viewState.labelSecondTimer),1)]),D("dl",bs,[vs,D("dd",null,M(a.viewState.labelMinuteTimer),1)])])])}const gs=X(fs,[["render",Ts],["__scopeId","data-v-df1d6d99"]]),_s=L("",4),Ss=L("",6),xs=JSON.parse('{"title":"Timer","description":"","frontmatter":{},"headers":[],"relativePath":"timer/Timer__advance.md","filePath":"timer/Timer__advance.md"}'),Es={name:"timer/Timer__advance.md"},Ms=Object.assign(Es,{setup(a){return(n,s)=>(I(),U("div",null,[_s,as(gs),Ss]))}});export{xs as __pageData,Ms as default};
